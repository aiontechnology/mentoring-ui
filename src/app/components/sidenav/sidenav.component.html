<!--
  ~ Copyright 2020-2022 Aion Technology LLC
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<mat-sidenav-container fullscreen>
  <mat-sidenav
    #drawer
    class="sidenav"
    fixedInViewport
    [attr.role]="(isHandset$ | async) ? 'dialog' : 'navigation'"
    [mode]="(isHandset$ | async) ? 'over' : 'side'"
    [opened]="userSession.isLoggedIn()"
  >
    <mat-toolbar>
      <a [routerLink]="['home']">
        <img src="assets/ms-logo.png"/>
      </a>
    </mat-toolbar>
    <mat-nav-list>
      <a mat-list-item [routerLink]="['adminmanager']" *ngIf="userSession.isSysAdmin">
        <span class="mat-h2">Admin</span>
      </a>
      <a mat-list-item [routerLink]="['schoolsmanager']" *ngIf="userSession.isSysAdmin">
        <span class="mat-h2">Schools</span>
      </a>
      <a mat-list-item [routerLink]="['schoolsmanager/schools', userSession.schoolUUID]"
         *ngIf="userSession.isProgAdmin">
        <span class="mat-h2">School</span>
      </a>
      <a mat-list-item [routerLink]="['resourcemanager']" [disabled]="!userSession.isLoggedIn()">
        <span class="mat-h2">Resources</span>
      </a>
      <a mat-list-item
         [routerLink]="['studentmanager', 'schools', schoolInstanceCache.item?.id]"
         [disabled]="!userSession.isLoggedIn() || schoolInstanceCache.isEmpty">
        <span class="mat-h2">Students</span>
      </a>
      <a mat-list-item
         [routerLink]="['mentormanager', 'schools', schoolInstanceCache.item?.id]"
         [disabled]="!userSession.isLoggedIn() || schoolInstanceCache.isEmpty">
        <span class="mat-h2">Mentors</span>
      </a>
    </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content>
    <ms-toolbar [isHandset$]="isHandset$" [drawer]="drawer"></ms-toolbar>
    <div class="router-wrapper">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
