<!--
  ~ Copyright 2020-2022 Aion Technology LLC
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<ms-dialog-container class="school-dialog" [panelTitle]="data.panelTitle" [component]="this"
                     [isValid]="modelFormGroup.valid">
  <form [formGroup]="modelFormGroup">
    <input type="hidden" formControlName="school">

    <div class="row-container">
      <mat-form-field appearance="outline">
        <mat-label>Name</mat-label>
        <input matInput formControlName="name" required/>
        <mat-error *ngIf="modelFormGroup.hasError('required', 'name')">
          You must enter a name
        </mat-error>
        <mat-error *ngIf="modelFormGroup.hasError('maxlength', 'name')">
          A school's name can be a maximum of 100 characters in length
        </mat-error>
      </mat-form-field>
    </div>

    <div class="row-container" *ngIf="!isUpdate">
      <mat-form-field appearance="outline">
        <mat-label>Initial Session Label</mat-label>
        <input matInput formControlName="initialSessionLabel" required/>
        <mat-error *ngIf="modelFormGroup.hasError('required', 'initialSessionLabel')">
          You must enter a initial session label
        </mat-error>
        <mat-error *ngIf="modelFormGroup.hasError('maxlength', 'initialSessionLabel')">
          A school's initial session label can be a maximum of 30 characters in length
        </mat-error>
      </mat-form-field>
    </div>

    <div formGroupName="address">
      <div class="row-container">
        <mat-form-field appearance="outline">
          <mat-label>Street 1</mat-label>
          <input matInput formControlName="street1"/>
          <mat-error *ngIf="modelFormGroup.hasError('maxlength', 'address.street1')">
            An address can be a maximum of 50 characters in length
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row-container">
        <mat-form-field appearance="outline">
          <mat-label>Street 2</mat-label>
          <input matInput formControlName="street2"/>
          <mat-error *ngIf="modelFormGroup.hasError('maxlength', 'address.street2')">
            An address can be a maximum of 50 characters in length
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row-container">
        <mat-form-field appearance="outline">
          <mat-label>City</mat-label>
          <input matInput formControlName="city"/>
          <mat-error *ngIf="modelFormGroup.hasError('maxlength', 'address.city')">
            A city can be a maximum of 50 characters in length
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row-container">
        <mat-form-field appearance="outline">
          <mat-label>State</mat-label>
          <mat-select formControlName="state">
            <mat-option *ngFor="let state of states" [value]="state.abbreviation">
              {{ state.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Zip</mat-label>
          <input matInput msOnlyNumber maxlength="10" formControlName="zip"/>
        </mat-form-field>
      </div>
    </div>

    <div class="row-container">
      <mat-form-field appearance="outline">
        <mat-label>Phone Number</mat-label>
        <input matInput msPhoneFormat formControlName="phone"/>
        <mat-error *ngIf="modelFormGroup.hasError('phoneNumberFormat', 'phone')">
          Invalid phone number format
        </mat-error>
      </mat-form-field>
    </div>

    <div class="row-container">
      <mat-form-field appearance="outline">
        <mat-label>District</mat-label>
        <input matInput formControlName="district"/>
        <mat-error *ngIf="modelFormGroup.hasError('maxlength', 'district')">
          A district can be a maximum of 50 characters in length
        </mat-error>
      </mat-form-field>
    </div>

    <div class="row-container">
      <mat-checkbox formControlName="isPrivate">Private?</mat-checkbox>
    </div>
  </form>
</ms-dialog-container>
